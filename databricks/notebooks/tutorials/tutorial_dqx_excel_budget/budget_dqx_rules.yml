
# ============================================================
# Reglas de Data Quality - Presupuesto Finanzas
# ============================================================
#
# Este fichero contiene reglas de calidad desacopladas del código.
# Puede versionarse en Git y evolucionar con el negocio.
#
# ============================================================

- name: year_is_valid
  criticality: error
  description: >
    El año debe tener exactamente 4 dígitos.
    Evita valores como 20, 202, o texto libre.
  check:
    function: regex_match
    arguments:
      column: year
      regex: "^[0-9]{4}$"

- name: period_is_valid
  criticality: error
  description: >
    El periodo debe representar un mes válido (1 a 12).
  check:
    function: is_in_range
    arguments:
      column: period
      min_limit: 1
      max_limit: 12

- name: legal_entity_allowed
  criticality: error
  description: >
    La entidad legal debe existir en la tabla de referencia corporativa.
    Esta lista se inyecta dinámicamente en tiempo de ejecución.
  check:
    function: is_in_list
    arguments:
      column: legal_entity
      allowed: []
